# Tianshu (天枢) 部署模式说明

Tianshu 提供三种不同的部署模式，以满足不同的使用需求：

## 1. 生产模式 (Production Mode)

生产模式是完整的、优化的部署方案，适用于正式环境和生产使用。

### 特点：
- 使用编译后的镜像，性能优化
- 代码挂载为只读，确保稳定性
- 适用于正式部署和生产环境
- 资源使用优化，启动速度快

### 适用场景：
- 正式生产环境
- 对性能有较高要求的场景
- 需要稳定运行的长期服务

### 启动命令：
```bash
# 使用 Makefile
make start

# 或直接使用 docker-compose
docker-compose up -d
```

## 2. 开发模式 (Development Mode)

开发模式专为开发者设计，支持热重载和调试功能。

### 特点：
- 代码热重载：修改代码后自动重启服务
- 调试支持：暴露调试端口，支持断点调试
- 详细日志：输出更详细的调试信息
- 本地代码挂载：直接挂载本地源代码目录

### 适用场景：
- 代码开发和调试
- 功能测试和验证
- 快速迭代开发

### 启动命令：
```bash
# 使用 Makefile
make dev

# 或直接使用 docker-compose
docker-compose -f docker-compose.dev.yml up -d
```

## 3. 全新部署模式 (Full Setup Mode)

全新部署模式是一键式部署方案，包含环境配置、镜像构建和启动服务。

### 特点：
- 一键部署：自动完成环境配置、镜像构建和启动
- 自动创建必要的目录结构
- 自动生成环境配置文件
- 适用于首次部署或全新环境搭建

### 适用场景：
- 首次部署项目
- 全新环境搭建
- 快速体验项目功能

### 启动命令：
```bash
# 使用 Makefile
make setup

# 或使用 Windows 批处理脚本
scripts\docker-setup.bat
```

## 模式对比表

| 特性 | 生产模式 | 开发模式 | 全新部署模式 |
|------|----------|----------|--------------|
| 镜像构建 | 预构建优化镜像 | 依赖阶段镜像 | 从零构建 |
| 代码挂载 | 只读挂载 | 读写挂载（热重载） | 读写挂载 |
| 调试支持 | 无 | 支持（调试端口） | 无 |
| 日志级别 | INFO | DEBUG | INFO |
| 启动速度 | 快 | 中等 | 慢（需构建） |
| 适用场景 | 生产环境 | 开发调试 | 首次部署 |

## 选择建议

1. **首次使用**：推荐使用全新部署模式，一键完成所有配置
2. **日常开发**：推荐使用开发模式，享受热重载和调试功能
3. **正式部署**：推荐使用生产模式，确保稳定性和性能